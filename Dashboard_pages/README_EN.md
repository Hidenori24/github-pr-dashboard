# GitHub PR Dashboard - GitHub Pages Version

A static web application that migrates the Streamlit-based dashboard to GitHub Pages + Actions.

[æ—¥æœ¬èª](README.md) | English

## ğŸ¯ Overview

This directory contains a static PR dashboard that can be hosted on GitHub Pages.
GitHub Actions periodically fetches PR data and saves it as JSON files, which are visualized on static HTML pages.

### Key Features

- âœ… **Fully Static**: No server required, runs on GitHub Pages
- âœ… **Auto Update**: Daily automatic data fetching via GitHub Actions
- âœ… **Fast Display**: Instant display by loading local files
- âœ… **Streamlit-style UI**: Follows the design of the original Streamlit dashboard
- âœ… **Multi-Repository Support**: Manage multiple repositories in one place
- âœ… **Responsive Design**: Works on PC/Tablet/Mobile
- âœ… **Bilingual Support**: Japanese and English interface with language toggle

## ğŸ“ Directory Structure

```
Dashboard_pages/
â”œâ”€â”€ index.html           # Main HTML file
â”œâ”€â”€ css/
â”‚   â””â”€â”€ style.css       # Stylesheet (Streamlit-inspired design)
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ config.js       # Configuration file
â”‚   â”œâ”€â”€ i18n.js         # Internationalization support
â”‚   â”œâ”€â”€ app.js          # Main application logic
â”‚   â”œâ”€â”€ dashboard.js    # Dashboard page logic
â”‚   â””â”€â”€ analytics.js    # Analytics page logic
â”œâ”€â”€ data/               # Generated JSON data (auto-generated by GitHub Actions)
â”‚   â”œâ”€â”€ config.json     # Repository configuration
â”‚   â”œâ”€â”€ prs.json        # PR data
â”‚   â”œâ”€â”€ analytics.json  # Analytics data
â”‚   â””â”€â”€ cache_info.json # Cache information
â”œâ”€â”€ generate_data.py    # Data generation script
â””â”€â”€ README.md          # This file
```

## ğŸš€ Setup

### Method 1: GitHub Actions Auto Deploy (Recommended)

1. **Update Repository Configuration**

   Edit `dashboard/config.py` to set your repositories:
   
   ```python
   REPOSITORIES = [
       {
           "name": "Your Project",
           "owner": "your-org",
           "repo": "your-repo"
       },
   ]
   ```

2. **Enable GitHub Pages**

   In your repository Settings > Pages:
   - Source: Select `GitHub Actions`
   - Save

3. **Configure GitHub Token**

   The default `GITHUB_TOKEN` is automatically used.
   For private repositories or additional permissions, create a Personal Access Token:
   - Settings > Secrets and variables > Actions
   - New repository secret
   - Name: `GH_PAT`
   - Value: Your Personal Access Token
   
   Then update `.github/workflows/deploy-pages.yml`:
   ```yaml
   env:
     GITHUB_TOKEN: ${{ secrets.GH_PAT }}
   ```

4. **Run the Workflow**

   - Open the Actions tab
   - Select "Deploy GitHub PR Dashboard to Pages"
   - Click "Run workflow"

5. **Access the Dashboard**

   Access at `https://<username>.github.io/<repository>/`

### Method 2: Local Testing

#### Option A: Quick Start with Sample Data

1. **Use Sample Data**

   ```bash
   cd Dashboard_pages/data
   cp sample_prs.json prs.json
   ```

2. **Start Local Server**

   ```bash
   cd ..
   # Use Python's simple server
   python -m http.server 8000
   
   # Or Node.js http-server
   npx http-server
   ```

3. **Access in Browser**

   Open `http://localhost:8000`

#### Option B: Use Real Data

1. **Generate Data**

   ```bash
   # Fetch data from existing Streamlit dashboard
   cd dashboard
   python fetch_data.py --all
   
   # Generate static JSON files
   cd ../Dashboard_pages
   python generate_data.py
   ```

2. **Start Local Server**

   ```bash
   # Use Python's simple server
   python -m http.server 8000
   
   # Or Node.js http-server
   npx http-server
   ```

3. **Access in Browser**

   Open `http://localhost:8000`

## âš™ï¸ Configuration

### Change Monitored Repositories

Edit `dashboard/config.py`:

```python
REPOSITORIES = [
    {
        "name": "Display Name",
        "owner": "GitHub Owner",
        "repo": "Repository Name"
    },
    # Add more as needed
]
```

### Change Update Frequency

Edit the schedule in `.github/workflows/deploy-pages.yml`:

```yaml
schedule:
  # Daily at 2 AM (UTC)
  - cron: '0 2 * * *'
  
  # For hourly execution
  # - cron: '0 * * * *'
  
  # For weekly Monday at 2 AM
  # - cron: '0 2 * * 1'
```

### UI Customization

- **Colors**: `:root` section in `css/style.css`
- **Charts**: `charts` section in `js/config.js`
- **Default Display**: `ui` section in `js/config.js`
- **Language**: Use the language toggle button (EN/JA) in the UI

## ğŸ“Š Features

### Home Page

- Repository selection
- Cache status display
- Navigation to each page
- Language toggle (English/Japanese)

### PR Dashboard

- **PR Timeline**: Visualize PR lifecycle in Gantt chart format
- **Metrics**: Count of Open/Merged/Closed, average merge time
- **PR List**: Filterable detailed table

### PR Analytics

7 analysis tabs:

1. **Stagnation Analysis**: Distribution of open PR duration
2. **Blocker Analysis**: Estimate causes for unclosed PRs
3. **Reviewer Analysis**: Review activity
4. **Trend Analysis**: Weekly PR creation trends
5. **Bottleneck Analysis**: Identify long-stagnant PRs
6. **Review Speed**: Time analysis from creation to merge
7. **Change Pattern**: File change frequency and PR size

### Four Keys (In Development)

DevOps Four Keys metrics measurement feature (to be implemented)

## ğŸ”„ Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GitHub API         â”‚
â”‚  (PR Data)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”‚ fetch_data.py
          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SQLite Cache       â”‚
â”‚  (pr_cache.db)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”‚ generate_data.py
          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  JSON Files         â”‚
â”‚  (data/*.json)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”‚ JavaScript
          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Dashboard UI       â”‚
â”‚  (Browser Display)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ› ï¸ Troubleshooting

### Data Not Displaying

1. Check if `data/prs.json` exists
2. Check browser console for errors
3. Check GitHub Actions logs

### GitHub Actions Failing

1. Verify `GITHUB_TOKEN` permissions
2. Check repository configuration in `dashboard/config.py`
3. Check if rate limit has been reached

### Page 404 Error

1. Verify GitHub Pages is enabled
2. Check if workflow completed successfully
3. Verify repository is public or GitHub Pages settings are correct

## ğŸ“ Key Changes from Streamlit Version

| Feature | Streamlit Version | Pages Version |
|---------|------------------|---------------|
| Runtime | Local PC | GitHub Pages |
| Data Fetching | Manual/Scheduled | GitHub Actions (Automatic) |
| Display Method | Python/Streamlit | HTML/CSS/JavaScript |
| Updates | Real-time | Periodic (Default: Daily) |
| Interaction | Python-side processing | Client-side JavaScript |
| Charts | Plotly (Python) | Plotly.js |
| Language | Japanese only | Japanese/English toggle |

## ğŸ¨ Design

Follows these Streamlit design elements:

- Sidebar navigation
- Color scheme (Red/Green/Blue accent colors)
- Card-based layout
- Clean and minimal UI
- Responsive design
- Bilingual interface (Japanese/English)

## ğŸ” Security

- GitHub Token managed in GitHub Actions secrets
- Only static files published, no server-side processing
- Private repository data can be safely processed

## ğŸ“„ License

This project is provided under the same license as the original repository.

## ğŸ¤ Contributing

Bug reports and feature requests are welcome at [Issues](../../issues).

## ğŸ“š Related Documentation

- [Original Streamlit Version README](../dashboard/README.md)
- [GitHub Pages Documentation](https://docs.github.com/en/pages)
- [GitHub Actions Documentation](https://docs.github.com/en/actions)
